<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Clarity ¬∑ Sigrid ‚Äî Bluefire (Iridescent)</title>
<meta name="description" content="Sigrid ¬∑ Bluefire: bioluminescent player with 128/160 Hz tones, R‚ÜîB spectral inversion, captions, and auto-advance."/>
<meta name="theme-color" content="#0d1520">
<style>
  /* ===== Illumina ¬∑ Bluefire Iridescent (dark-but-not-night) ===== */
  :root{
    --bg:#0d1520; --panel:#111a26; --ink:#eaf2ff; --muted:#9bb3cc; --ring:#24364a;
    --glow:#9ae6ff; --accent:#b9f; --red:#ff4766; --blue:#3bb5ff;
    --film-a:rgba(255,180,255,.12); --film-b:rgba(120,210,255,.10); --film-c:rgba(180,255,220,.08);
    --font: ui-sans-serif, -apple-system, Segoe UI, Inter, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
    --radius:14px; --shadow:0 10px 30px rgba(12,22,35,.6)
  }
  .bluefire{ --red:#3bb5ff; --blue:#ff4766; }
  .iridescent{ --bg:#0b1220; --panel:#0f1725; --ring:#203249; --glow:#bdf1ff; }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:var(--font); color:var(--ink); background:var(--bg);
    background-image:
      radial-gradient(1200px 600px at 20% -10%, var(--film-a), transparent 60%),
      radial-gradient(900px 600px at 110% 10%, var(--film-b), transparent 60%),
      radial-gradient(600px 500px at 50% 120%, var(--film-c), transparent 60%),
      linear-gradient(180deg, rgba(9,16,28,.8), rgba(9,16,28,.9));
    background-attachment:fixed;
  }

  header{position:sticky; top:0; z-index:5; backdrop-filter:saturate(140%) blur(8px);
    background:linear-gradient(180deg, rgba(14,22,35,.8), rgba(14,22,35,.5));
    border-bottom:1px solid var(--ring)}
  .wrap{max-width:980px; margin:0 auto; padding:14px 16px}
  h1{font-size:1.1rem; letter-spacing:.02em; margin:0; font-weight:650}

  .controls{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
  .chip{
    border:1px solid var(--ring); padding:8px 12px; border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    font-weight:600; cursor:pointer; user-select:none; color:var(--ink)
  }
  .chip[aria-pressed="true"]{
    border-color:color-mix(in lab, var(--blue) 60%, var(--ring));
    box-shadow:0 0 0 2px color-mix(in lab, var(--blue) 30%, transparent)
  }

  .btn{
    appearance:none; border:1px solid var(--ring); color:var(--ink);
    background:
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02)) padding-box,
      conic-gradient(from 0deg, var(--blue), var(--accent), var(--red), var(--blue)) border-box;
    border-radius:16px; padding:14px 18px; font-weight:700; cursor:pointer; box-shadow:var(--shadow);
    position:relative; isolation:isolate; overflow:hidden
  }
  .btn:after{
    content:""; position:absolute; inset:-60% -20%; transform:translateX(-60%);
    background:conic-gradient(from 0deg, transparent 20%, rgba(255,255,255,.15) 35%, transparent 55%);
    filter:blur(12px); pointer-events:none; animation:sheen 3.2s linear infinite
  }
  @keyframes sheen{to{transform:translateX(120%)}}

  main{padding:24px 16px 80px}
  .hero{
    border:1px solid var(--ring); border-radius:var(--radius);
    background:
      radial-gradient(120% 100% at 10% 0%, rgba(255,255,255,.06), transparent 60%),
      linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
    padding:18px; box-shadow:var(--shadow); position:relative; overflow:hidden
  }
  /* Bioluminescent jelly veil */
  .hero:before{
    content:""; position:absolute; inset:-20% -10%;
    background:
      radial-gradient(60% 40% at 30% 0%, rgba(155,255,240,.12), transparent 70%),
      radial-gradient(40% 30% at 90% 30%, rgba(210,170,255,.10), transparent 70%),
      radial-gradient(30% 20% at 60% 110%, rgba(255,210,230,.08), transparent 70%);
    mix-blend-mode:screen; pointer-events:none; animation:floaty 16s ease-in-out infinite alternate
  }
  @keyframes floaty{0%{transform:translateY(-4px)}100%{transform:translateY(6px)}}

  .row{display:grid; grid-template-columns:1.2fr .8fr; gap:16px}
  @media (max-width:900px){ .row{grid-template-columns:1fr; gap:12px} }

  .player{
    border:1px solid var(--ring); border-radius:12px; overflow:hidden; background:var(--panel); position:relative
  }
  .ytbox{position:relative; width:100%; aspect-ratio:16/9; background:#000}
  .meta{padding:12px 12px 14px}
  .title{font-weight:700}
  .caption{color:var(--muted); margin-top:6px; font-size:.95rem; line-height:1.5}

  .pane{
    border:1px solid var(--ring); border-radius:12px; padding:12px; background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02))
  }
  .list{display:grid; gap:8px; max-height:360px; overflow:auto; padding-right:4px}
  .item{
    display:flex; gap:10px; align-items:center; padding:8px; border-radius:10px; cursor:pointer;
    border:1px solid transparent; background:rgba(255,255,255,.02)
  }
  .item.active{ border-color:color-mix(in lab, var(--blue) 45%, transparent);
    box-shadow:0 0 0 2px color-mix(in lab, var(--blue) 25%, transparent)}
  .thumb{width:56px; height:34px; background:#0b0b0b; border-radius:6px; flex:none}

  .meters{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:10px}
  .meter{flex:1; height:10px; border:1px solid var(--ring); border-radius:999px; background:rgba(255,255,255,.04); position:relative; overflow:hidden}
  .meter>span{position:absolute; inset:0; transform:scaleX(0); transform-origin:left; background:linear-gradient(90deg, var(--blue), var(--red)); transition:transform .3s ease}

  .tag{display:inline-flex; align-items:center; gap:8px; font-size:.9rem; color:var(--muted); margin-top:8px}
  .swatch{width:10px; height:10px; border-radius:50%; border:1px solid var(--ring)}
  .swatch.red{background:var(--red)} .swatch.blue{background:var(--blue)}

  .footer{margin-top:18px; color:var(--muted); font-size:.92rem}
  .score{font-size:1.1rem}

  .sr-only{position:absolute!important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>Sigrid ¬∑ Bluefire (Iridescent)</h1>
    <div class="controls" role="group" aria-label="Theme & audio controls">
      <button id="activate" class="btn" title="Tap to enable audio/video">üîµ Activate Bluefire</button>
      <button id="toggleBluefire" class="chip" aria-pressed="false" title="Swap red/blue spectral channels">Bluefire R‚ÜîB</button>
      <button id="toggleIridescent" class="chip" aria-pressed="true" title="Iridescent On">Iridescent</button>
      <button id="modeTracks" class="chip" aria-pressed="false" title="Show Tracks list">Tracks</button>
      <button id="modeInterviews" class="chip" aria-pressed="true" title="Show Interviews list">Interviews</button>
      <button id="toggle128" class="chip" aria-pressed="true" title="128 Hz warmth">128 Hz</button>
      <button id="toggle160" class="chip" aria-pressed="false" title="160 Hz lift">160 Hz</button>
    </div>
  </div>
</header>

<main class="wrap">
  <section class="hero">
    <div class="row">
      <div class="player">
        <div class="ytbox" id="ytbox"></div>
        <div class="meta">
          <div class="title" id="title">‚Äî</div>
          <div class="caption" id="caption">Tap ‚ÄúActivate Bluefire‚Äù to unlock audio on iPhone. One interview plays at a time; auto-advance is enabled.</div>
          <div class="meters">
            <div class="meter" title="128 Hz"><span id="m128"></span></div>
            <div class="meter" title="160 Hz"><span id="m160"></span></div>
            <div class="tag">
              <span class="swatch red" aria-hidden="true"></span><span class="swatch blue" aria-hidden="true"></span>
              <span id="mapLbl">mapping ready</span>
            </div>
          </div>
        </div>
      </div>

      <aside class="pane">
        <div class="list" id="list"></div>
        <div class="footer">
          <div class="score" id="score">‚ú® glow: ‚Äî</div>
          <div>Hint: inhale <strong>blue warmth</strong> (128), exhale <strong>rose sky</strong> (160). Bluefire is a red-through-blue lens, not a bug.</div>
        </div>
      </aside>
    </div>
  </section>
</main>

<!-- YouTube Iframe API -->
<script src="https://www.youtube.com/iframe_api"></script>
<script>
/* ===== Interviews (10) ‚Äî Bluefire picks =====
   (All are interview/conversation clips. Auto-advance is wired.) */
const playlistInterviews = [
  {title:"Latitude 2025 ‚Äî In Conversation with Sigrid (The Independent x Klarna)",
   youtubeId:"qbOMmaH5NMI",
   caption:"Long-form 2025 conversation about craft & career."},
  {title:"Apple Music ‚Äî Up Next Interview (with Julie Adenuga)",
   youtubeId:"JZ4iuIUu3Hw",
   caption:"Early story / origin energy."},
  {title:"NME ‚Äî Reading Festival 2018 chat",
   youtubeId:"NR4-NpkK6I8",
   caption:"Debut album talk & festival lens."},
  {title:"BBC Radio 1 ‚Äî ‚ÄòHigh Five‚Äô interview (Annie Mac, 2018)",
   youtubeId:"T07CzV5HDB8",
   caption:"Single drop context & process."},
  {title:"Glastonbury 2022 ‚Äî ‚ÄòHow to Let Go‚Äô inspiration",
   youtubeId:"P4IufPlewWM",
   caption:"Album, stage energy, writing with Glasto in mind."},
  {title:"Lorraine (ITV) ‚Äî How to Let Go interview",
   youtubeId:"b-bsVECPKVc",
   caption:"Mainstream morning sit-down; album themes."},
  {title:"DIFFUS ‚Äî Upbringing, new music & awareness",
   youtubeId:"0-2jQSOLYII",
   caption:"Portrait-style interview."},
  {title:"Osheaga 2019 ‚Äî Pre-show chat",
   youtubeId:"196ZLUZNBqo",
   caption:"Childhood memories, favorite words, live buzz."},
  {title:"Mad Cool 2022 ‚Äî Festival interview",
   youtubeId:"OLvc7Qtl6p4",
   caption:"Touring + ‚ÄòBurning Bridges‚Äô era."},
  {title:"√òya 2017 ‚Äî Talks session",
   youtubeId:"vZr8foGuHUo",
   caption:"Early-era creative process at √òya Festival."}
];

/* Optional: you can add music videos later */
const playlistTracks = []; // keep UI; empty for now
/* ============================================ */

(function(){
  const root = document.documentElement;
  root.classList.add('iridescent'); // default theme

  const $ = (id)=>document.getElementById(id);
  const list = $('list'), title = $('title'), caption = $('caption');
  const m128 = $('m128'), m160 = $('m160'), score = $('score'), mapLbl = $('mapLbl');

  const btnActivate = $('activate');
  const btnBluefire = $('toggleBluefire');
  const btnIridescent = $('toggleIridescent');
  const btnTracks = $('modeTracks');
  const btnInterviews = $('modeInterviews');
  const btn128 = $('toggle128');
  const btn160 = $('toggle160');

  // Local state
  let mode = 'interviews';
  let items = playlistInterviews.slice();
  let index = 0;
  let glow = Number(localStorage.getItem('bluefire_glow')||0);

  // WebAudio (created on tap)
  let ctx, gMain, osc128, osc160, g128, g160;

  // YouTube Player
  let ytPlayer, ytReady = false, pendingLoad = null;

  // Helpers
  const fmtGlow = (n)=> '‚ú® glow: ' + 'üíô'.repeat(Math.min(10, Math.floor(n/3))) + (n>30?' +':'');
  const updateGlow = (delta)=>{ glow = Math.max(0, glow + delta); localStorage.setItem('bluefire_glow', glow); score.textContent = fmtGlow(glow); };
  const setMeters = (a,b)=>{ m128.style.transform = `scaleX(${a})`; m160.style.transform = `scaleX(${b})`; };
  score.textContent = fmtGlow(glow);

  // Build list UI
  function buildList(){
    list.innerHTML = '';
    items = (mode==='tracks' ? playlistTracks : playlistInterviews).slice();
    if(items.length===0){
      const note = document.createElement('div');
      note.className = 'caption';
      note.textContent = mode==='tracks'
        ? 'Add music videos later (playlistTracks).'
        : 'No interviews found.';
      list.appendChild(note);
      return;
    }
    items.forEach((it, i)=>{
      const el = document.createElement('button');
      el.className = 'item'; el.type='button';
      el.innerHTML = `<div class="thumb"></div><div><div style="font-weight:700">${it.title||'Untitled'}</div><div class="caption" style="margin:2px 0 0">${it.caption||''}</div></div>`;
      el.addEventListener('click', ()=>load(i,true));
      list.appendChild(el);
    });
    highlight();
  }

  function highlight(){
    [...list.children].forEach((c, i)=>c.classList.toggle('active', i===index));
  }

  function load(i, user=false){
    if(!items.length || !ytReady) { pendingLoad = {i, user}; return; }
    index = (i+items.length)%items.length;
    const it = items[index];
    title.textContent = it.title || '‚Äî';
    caption.textContent = it.caption || '';
    ytPlayer.loadVideoById(it.youtubeId);
    highlight();
    if(user){ updateGlow(1); }
  }

  function next(){ load(index+1, true); }

  // ---- Activation: create AudioContext + tones, then init YT and play ----
  btnActivate.addEventListener('click', ()=>{
    if(!ctx){
      try{
        const AC = window.AudioContext || window.webkitAudioContext;
        ctx = new AC();
        gMain = ctx.createGain(); gMain.gain.value = 0.5;

        // 128 Hz (warmth)
        osc128 = ctx.createOscillator(); osc128.type = 'sine'; osc128.frequency.value = 128;
        g128 = ctx.createGain(); g128.gain.value = btn128.getAttribute('aria-pressed')==='true' ? 0.22 : 0.0;
        osc128.connect(g128).connect(gMain);

        // 160 Hz (lift)
        osc160 = ctx.createOscillator(); osc160.type = 'sine'; osc160.frequency.value = 160;
        g160 = ctx.createGain(); g160.gain.value = btn160.getAttribute('aria-pressed')==='true' ? 0.16 : 0.0;
        osc160.connect(g160).connect(gMain);

        gMain.connect(ctx.destination);
        osc128.start(); osc160.start();

        setMeters(g128.gain.value>0?1:0, g160.gain.value>0?1:0);
      }catch(e){}
    }

    // Init YouTube player after gesture
    ensureYT();
    btnActivate.textContent = 'üü¶ Bluefire Active';
    btnActivate.disabled = true;
    updateGlow(3);
  });

  // ---- UI Toggles ----
  btnBluefire.addEventListener('click', function(){
    const on = root.classList.toggle('bluefire');
    this.setAttribute('aria-pressed', on?'true':'false');
    mapLbl.textContent = on ? 'Bluefire mapping ON (R‚ÜîB)' : 'mapping ready';
    document.body.style.outline = on ? '2px solid var(--blue)' : 'none';
    setTimeout(()=>{ document.body.style.outline='none'; }, 220);
    updateGlow(1);
  });

  btnIridescent.addEventListener('click', function(){
    const on = !root.classList.contains('iridescent');
    root.classList.toggle('iridescent');
    this.setAttribute('aria-pressed', on?'true':'false');
  });

  btnTracks.addEventListener('click', function(){
    mode='tracks'; this.setAttribute('aria-pressed','true'); btnInterviews.setAttribute('aria-pressed','false');
    buildList(); if(items.length) load(0,false);
  });

  btnInterviews.addEventListener('click', function(){
    mode='interviews'; this.setAttribute('aria-pressed','true'); btnTracks.setAttribute('aria-pressed','false');
    buildList(); if(items.length) load(0,false);
  });

  btn128.addEventListener('click', function(){
    const on = this.getAttribute('aria-pressed')!=='true';
    this.setAttribute('aria-pressed', on?'true':'false');
    if(g128 && ctx){ g128.gain.setTargetAtTime(on?0.22:0.0, ctx.currentTime, 0.05); }
    setMeters(on?1:0, g160 && g160.gain && g160.gain.value>0 ? 1:0);
  });

  btn160.addEventListener('click', function(){
    const on = this.getAttribute('aria-pressed')!=='true';
    this.setAttribute('aria-pressed', on?'true':'false');
    if(g160 && ctx){ g160.gain.setTargetAtTime(on?0.16:0.0, ctx.currentTime, 0.05); }
    setMeters(g128 && g128.gain && g128.gain.value>0 ? 1:0, on?1:0);
  });

  // Keyboard next/prev
  document.addEventListener('keydown', (e)=>{
    if(e.key==='ArrowRight') next();
    if(e.key==='ArrowLeft') load(index-1,true);
  });

  // Build initial list (Interviews default)
  buildList();

  // YouTube API boot
  window.onYouTubeIframeAPIReady = function(){
    // (global hook; will be called even before Activate; we create the player after gesture)
  };

  function ensureYT(){
    if(ytPlayer) return;
    ytPlayer = new YT.Player('ytbox', {
      width: '100%', height: '100%',
      playerVars: {
        autoplay: 1, playsinline: 1, controls: 1, rel: 0, modestbranding: 1, origin: location.origin
      },
      events: {
        'onReady': (e)=>{
          ytReady = true;
          // load the first item
          if(pendingLoad){ load(pendingLoad.i, pendingLoad.user); pendingLoad=null; }
          else if(items.length){ load(0,false); }
        },
        'onStateChange': (e)=>{
          // 0 = ended, 1 = playing, 2 = paused
          if(e.data === YT.PlayerState.ENDED){ next(); }
          if(e.data === YT.PlayerState.PLAYING){ updateGlow(1); }
        }
      }
    });
  }
})();
</script>
</body>
</html>
